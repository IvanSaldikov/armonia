{% extends "admin/base_site.html" %}
{% load i18n admin_modify %}
{% load admin_urls %}
{% load static %}

{% block breadcrumbs_last %}
    {% trans "Import" %}
{% endblock %}

{% block content_title %}{% if title %}<h1>My AI GF Metrics</h1>{% endif %}{% endblock %}

{% block extrastyle %}
    <link href="{% static 'css/admin.css' %}" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
{% endblock %}

{% block extrahead %}
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="{% static 'js/admin_dashboard_team_table.js' %}"></script>
{% endblock %}

{% if not is_popup %}
    {% block breadcrumbs %}
        <div class="breadcrumbs">
            <a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
            &rsaquo;
            My AI GF Metrics
        </div>
    {% endblock %}
{% endif %}

{% block content %}

    <div style="width: 85%;">
        <h1 class="display-5 text-dark">Main Stats</h1>

        <h2>Total Users (sign ups): <span class="title_important alert-success">{{ metrics.total_users }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_total_users|safe }}</div>

        <h2>Users with at least one message: <span class="title_important alert-success">{{ metrics.users_with_messages }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_users_with_messages|safe }}</div>

        <h2>Reached Maximum Messages: <span class="title_important alert-success">{{ metrics.reached_maximum_messages }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_reached_maximum_messages|safe }}</div>

        <h2>Users with no messages at all: <span class="title_important alert-success">{{ metrics.users_with_no_messages }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_users_with_no_messages|safe }}</div>

        <h2>Number of AI GFs (NOT public): <span class="title_important alert-success">{{ metrics.number_of_problems_not_public }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_number_of_problems_not_public|safe }}</div>

        <h2>Number of AI GFs (public): <span class="title_important alert-success">{{ metrics.number_of_problems_public }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_number_of_problems_public|safe }}</div>

        <h2>Number of User's messages: <span class="title_important alert-success">{{ metrics.number_of_users_messages }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_number_of_users_messages|safe }}</div>

        <h2>Users with custom AI GFs: <span class="title_important alert-success">{{ metrics.users_with_problems }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_users_with_problems|safe }}</div>

        <h2>Number of AI GF messages (TOTAL): <span class="title_important alert-success">{{ metrics.number_of_problem_messages_total }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_number_of_problem_messages_total|safe }}</div>

        <h2>Number of AI GF messages (TEXT): <span class="title_important alert-success">{{ metrics.number_of_problem_messages_text }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_number_of_problem_messages_text|safe }}</div>

        <h2>Number of AI GF messages (PHOTO): <span class="title_important alert-success">{{ metrics.number_of_problem_messages_photo }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_number_of_problem_messages_photo|safe }}</div>


        <h1 class="display-5 text-dark mt-5">KPIs</h1>
        <h2>Ratio Reached per Total users (%): <span class="title_important alert-success">{{ metrics.ratio_reached_per_signups }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_ratio_reached_per_signups|safe }}</div>

        <h2>Ratio Users counter with at least one Message to Total users (%): <span class="title_important alert-success">{{ metrics.ratio_at_least_one_message_users_to_signups }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_ratio_at_least_one_message_users_to_signups|safe }}</div>

        <h2>Chat satisfaction (%): <span class="title_important alert-success">{{ metrics.chat_satisfaction }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_chat_satisfaction|safe }}</div>

        <h2>Photos to Text Messages Ratio (%): <span class="title_important alert-success">{{ metrics.photos_to_text_messages_ratio }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_photos_to_text_messages_ratio|safe }}</div>

        <h2>Users with custom AI GFs to users with any messages ratio (%): <span class="title_important alert-success">{{ metrics.custom_problems_to_total_users_with_messages_ratio }}</span></h2>
        <div class="title_important">{{ chart_metrics.chart_custom_problems_to_total_users_with_messages_ratio|safe }}</div>
    </div>

{% endblock %}
